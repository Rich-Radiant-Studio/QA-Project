# 认证标识功能完整说明

## 功能概述

本文档详细说明了问答社区 APP 中的用户认证标识功能，包括认证标识显示和认证申请流程。

---

## 一、认证标识显示

### 1.1 认证类型

系统支持四种认证状态：

| 认证类型 | 标识文字 | 图标颜色 | 背景颜色 | 说明 |
|---------|---------|---------|---------|------|
| 未认证 | 去认证（按钮） | 蓝色 #3b82f6 | 浅蓝 #eff6ff | 显示为可点击按钮 |
| 个人认证 | 个人认证 | 黄色 #f59e0b | - | 圆形徽章 + 对勾 + 文字 |
| 企业认证 | 企业认证 | 蓝色 #3b82f6 | - | 圆形徽章 + 对勾 + 文字 |
| 政府认证 | 政府认证 | 红色 #ef4444 | - | 圆形徽章 + 对勾 + 文字 |

### 1.2 显示位置

认证标识显示在个人资料页面的用户名后面，位于用户名和等级标签之间。

```
张三 [认证标识] Lv.5
```

### 1.3 交互行为

- **未认证状态**：点击"去认证"按钮，打开认证申请弹窗
- **已认证状态**：点击认证标识，显示认证详情（认证时间、认证机构等）

### 1.4 视觉设计

#### 未认证状态
```
┌──────────┐
│ 去认证    │  ← 蓝色边框按钮
└──────────┘
```

#### 已认证状态
```
⭕ 个人认证  ← 黄色圆形徽章 + 对勾 + 文字
⭕ 企业认证  ← 蓝色圆形徽章 + 对勾 + 文字
⭕ 政府认证  ← 红色圆形徽章 + 对勾 + 文字
```

---

## 二、认证申请流程

### 2.1 入口

用户可以通过以下两种方式进入认证申请流程：

1. 点击个人资料页面用户名后的"去认证"按钮
2. 点击个人资料页面菜单中的"我要认证"选项

### 2.2 流程步骤

认证申请流程分为三个步骤：

```
步骤0: 选择认证类型
    ↓
步骤1: 填写认证信息
    ↓
步骤2: 确认信息并提交
```

### 2.3 步骤详解

#### 步骤0：选择认证类型

用户从三种认证类型中选择一种：

1. **个人认证**
   - 图标：👤 person
   - 颜色：黄色 #f59e0b
   - 说明：验证个人身份，获得个人认证标识

2. **企业认证**
   - 图标：🏢 business
   - 颜色：蓝色 #3b82f6
   - 说明：验证企业资质，获得企业认证标识

3. **政府机构认证**
   - 图标：🏛️ shield-checkmark
   - 颜色：红色 #ef4444
   - 说明：验证政府身份，获得官方认证标识

#### 步骤1：填写认证信息

根据选择的认证类型，显示对应的表单：

##### 个人认证表单

**📋 基本信息**
- 真实姓名 *（必填）
- 证件类型 *（必填，默认：身份证）
- 证件号码 *（必填）

**📸 上传证件照片**
- 证件正面 *（必填）
- 证件反面 *（必填）
- 手持证件照 *（必填）

##### 企业认证表单

**🏢 企业基本信息**
- 企业名称 *（必填）
- 统一社会信用代码 *（必填，18位）
- 企业注册号（选填）
- 纳税人识别号（选填）
- 企业地址 *（必填）

**📸 上传企业证件**
- 营业执照 *（必填）

**👤 法人信息**
- 法人姓名 *（必填）
- 法人身份证号 *（必填）
- 联系电话 *（必填）

##### 政府机构认证表单

**🏛️ 机构基本信息**
- 机构名称 *（必填）
- 机构统一社会信用代码 *（必填）
- 机构类型 *（必填，如：政府部门、事业单位等）
- 所属部门 *（必填）
- 机构地址 *（必填）

**📸 上传官方文件**
- 机构证明文件 *（必填，如：组织机构代码证、事业单位法人证书）
- 授权委托书 *（必填，需加盖公章）

**👤 授权人信息**
- 授权人姓名 *（必填）
- 授权人职位 *（必填）
- 授权人身份证号 *（必填）
- 联系电话 *（必填）

#### 步骤2：确认信息并提交

**📋 信息确认**
- 显示已填写的关键信息
- 提供编辑按钮，可返回修改

**⚠️ 重要提示**
- 请确保所有信息真实有效
- 提交后将进入人工审核流程
- 审核时间约1-3个工作日
- 审核结果将通过站内信通知

**服务协议**
- ☑️ 我已阅读并同意《认证服务协议》

**提交按钮**
- 点击"提交认证申请"完成提交

### 2.4 表单验证

系统会在用户点击"下一步"时进行表单验证：

**个人认证验证规则：**
- 真实姓名不能为空
- 证件号码不能为空

**企业认证验证规则：**
- 企业名称不能为空
- 统一社会信用代码不能为空
- 法人姓名不能为空
- 联系电话不能为空

**政府认证验证规则：**
- 机构名称不能为空
- 机构统一社会信用代码不能为空
- 授权人姓名不能为空
- 联系电话不能为空

如果验证失败，会弹出提示："请填写完整的XXX信息"

### 2.5 图片上传

点击图片上传按钮时，会弹出选择框：

```
┌─────────────────┐
│  上传图片        │
│                 │
│  [相册]         │
│  [相机]         │
│  [取消]         │
└─────────────────┘
```

**上传状态：**

未上传：
```
┌─────────────┐
│     📷      │
│    上传     │
└─────────────┘
```

已上传：
```
┌─────────────┐
│  [图片预览]  │
└─────────────┘
```

### 2.6 提交成功

提交成功后，显示提示框：

```
┌─────────────────────────────┐
│  提交成功                    │
│                             │
│  您的认证申请已提交，我们将  │
│  在1-3个工作日内完成审核，   │
│  请耐心等待。                │
│                             │
│           [确定]            │
└─────────────────────────────┘
```

点击"确定"后，关闭弹窗，返回个人资料页面。

---

## 三、技术实现

### 3.1 状态管理

```javascript
// 认证状态
const [verificationType, setVerificationType] = useState('none');

// 认证弹窗状态
const [showVerificationModal, setShowVerificationModal] = useState(false);
const [verificationStep, setVerificationStep] = useState(0);
const [selectedVerificationType, setSelectedVerificationType] = useState('');

// 认证数据
const [verificationData, setVerificationData] = useState({
  personal: {
    name: '',
    idType: 'idCard',
    idNumber: '',
    idFront: null,
    idBack: null,
    idHold: null,
  },
  enterprise: {
    name: '',
    creditCode: '',
    registrationNumber: '',
    taxNumber: '',
    address: '',
    license: null,
    legalName: '',
    legalIdNumber: '',
    phone: '',
  },
  government: {
    name: '',
    creditCode: '',
    type: '',
    department: '',
    address: '',
    certificate: null,
    authorization: null,
    authorizerName: '',
    authorizerPosition: '',
    authorizerIdNumber: '',
    phone: '',
  },
});
```

### 3.2 核心函数

```javascript
// 获取认证信息
const getVerificationInfo = () => {
  switch (verificationType) {
    case 'personal':
      return { color: '#f59e0b', icon: 'checkmark', text: '个人认证', verified: true };
    case 'enterprise':
      return { color: '#3b82f6', icon: 'checkmark', text: '企业认证', verified: true };
    case 'government':
      return { color: '#ef4444', icon: 'checkmark', text: '政府认证', verified: true };
    case 'none':
    default:
      return { color: '#9ca3af', icon: 'close', text: '未认证', verified: false };
  }
};

// 处理认证标识点击
const handleVerificationPress = () => {
  if (!verificationInfo.verified) {
    setShowVerificationModal(true);
    setVerificationStep(0);
  } else {
    Alert.alert('认证信息', `您已完成${verificationInfo.text}\n认证时间：2025-12-15\n认证机构：官方认证中心`);
  }
};

// 选择认证类型
const handleSelectVerificationType = (type) => {
  setSelectedVerificationType(type);
  setVerificationStep(1);
};

// 返回上一步
const handleVerificationBack = () => {
  if (verificationStep === 0) {
    setShowVerificationModal(false);
  } else {
    setVerificationStep(verificationStep - 1);
  }
};

// 下一步（含验证）
const handleVerificationNext = () => {
  const data = verificationData[selectedVerificationType];
  
  // 验证逻辑
  if (selectedVerificationType === 'personal') {
    if (!data.name || !data.idNumber) {
      Alert.alert('提示', '请填写完整的个人信息');
      return;
    }
  }
  // ... 其他类型验证
  
  setVerificationStep(2);
};

// 提交认证申请
const handleVerificationSubmit = () => {
  Alert.alert(
    '提交成功',
    '您的认证申请已提交，我们将在1-3个工作日内完成审核，请耐心等待。',
    [
      {
        text: '确定',
        onPress: () => {
          setShowVerificationModal(false);
          setVerificationStep(0);
          setSelectedVerificationType('');
        }
      }
    ]
  );
};

// 图片上传
const handleImageUpload = (field) => {
  Alert.alert('上传图片', '请选择图片来源', [
    { text: '相册', onPress: () => { /* 上传逻辑 */ }},
    { text: '相机', onPress: () => { /* 拍照逻辑 */ }},
    { text: '取消', style: 'cancel' }
  ]);
};

// 更新字段值
const updateVerificationField = (field, value) => {
  setVerificationData({
    ...verificationData,
    [selectedVerificationType]: {
      ...verificationData[selectedVerificationType],
      [field]: value
    }
  });
};
```

### 3.3 UI 组件

认证弹窗使用 Modal 组件实现，包含以下部分：

1. **头部**：返回/关闭按钮 + 标题
2. **进度条**：显示当前步骤（仅步骤1和2显示）
3. **内容区域**：根据步骤显示不同内容（可滚动）
4. **底部按钮**：下一步/提交按钮（仅步骤1和2显示）

### 3.4 样式设计

认证弹窗采用全屏设计，背景色为 #f9fafb（浅灰色），与整体风格保持一致。

**关键样式：**
- 卡片背景：白色 #fff
- 边框颜色：#e5e7eb
- 圆角：12px（卡片）、8px（输入框）
- 间距：16px（外边距）、12px（内边距）
- 字体：标题 18px/bold，正文 14px/regular，提示 12px/regular

---

## 四、用户体验优化

### 4.1 分步引导

将复杂的认证流程分为三个简单的步骤，降低用户认知负担。

### 4.2 进度提示

在步骤1和2显示进度条和步骤说明，让用户清楚当前位置。

### 4.3 输入提示

每个输入字段都有详细的提示文字（💡 开头），降低填写难度。

### 4.4 实时验证

在用户点击"下一步"时进行验证，及时反馈错误信息。

### 4.5 信息确认

在提交前显示信息确认页面，让用户核对信息，避免错误。

### 4.6 视觉反馈

- 必填项用红色星号标注
- 已上传的图片显示预览
- 进度条动态显示当前进度
- 按钮有明确的文字说明

---

## 五、后续优化建议

### 5.1 功能优化

1. **实时图片上传**：集成 ImagePicker 实现真实的图片选择和上传
2. **OCR 识别**：自动识别证件信息，减少手动输入
3. **地址自动补全**：集成地图 API，提供地址自动补全功能
4. **企业名称联想**：集成企业信息 API，提供企业名称联想搜索
5. **草稿保存**：自动保存填写内容，避免重复填写
6. **审核进度查询**：提供审核进度查询功能

### 5.2 体验优化

1. **拍照指引**：提供证件拍摄指引，提高照片质量
2. **示例展示**：提供填写示例，降低填写难度
3. **在线客服**：提供在线客服支持，解答用户疑问
4. **常见问题**：提供常见问题解答，减少咨询量

### 5.3 安全优化

1. **数据加密**：对敏感信息进行加密传输和存储
2. **防重复提交**：防止用户重复提交认证申请
3. **人脸识别**：增加人脸识别验证，提高安全性
4. **审核记录**：记录审核过程，便于追溯

---

## 六、总结

认证标识功能是问答社区 APP 的重要功能之一，通过清晰的流程设计和友好的用户体验，帮助用户快速完成认证申请。

**功能特点：**
- ✅ 支持三种认证类型（个人、企业、政府）
- ✅ 三步流程清晰，易于理解
- ✅ 表单字段分组，逻辑清晰
- ✅ 输入提示详细，降低填写难度
- ✅ 实时验证，及时反馈错误
- ✅ 信息确认，避免提交错误
- ✅ 视觉设计统一，符合整体风格

**技术实现：**
- ✅ 使用 React Native Modal 实现全屏弹窗
- ✅ 使用 useState 管理状态
- ✅ 使用条件渲染实现步骤切换
- ✅ 使用 Alert 实现提示和确认
- ✅ 代码结构清晰，易于维护

**后续优化：**
- 🔄 集成真实的图片上传功能
- 🔄 增加 OCR 识别功能
- 🔄 提供地址自动补全
- 🔄 增加草稿保存功能
- 🔄 提供审核进度查询

---

**文档版本：** v1.0  
**编写日期：** 2026-02-05  
**编写人：** Kiro AI Assistant  
**审核状态：** 待审核
