# 超级赞功能测试指南

## 🧪 快速测试步骤

### 1. 启动应用
```bash
cd qa-app/qa-native-app
npm start
```

### 2. 进入问题详情页
- 打开应用
- 进入首页
- 点击任意问题进入详情页

### 3. 查看回答列表
切换到"回答"标签，你会看到3条回答：

#### 第1条回答（Python老司机）
- ❌ 不是我的回答
- ⭐ 有5个超级赞
- ✅ 显示超级赞徽章
- ❌ 没有购买按钮

#### 第2条回答（数据分析师小王）⭐
- ✅ **是我的回答** (`isMyAnswer: true`)
- ⭐ 有12个超级赞
- ✅ 显示超级赞徽章
- ✅ **显示购买按钮** 👈 重点测试

#### 第3条回答（编程新手）
- ❌ 不是我的回答
- ⭐ 0个超级赞
- ❌ 没有超级赞徽章
- ❌ 没有购买按钮

### 4. 测试购买功能

#### 步骤1：点击购买按钮
在第2条回答下方，点击金黄色的按钮：
```
⭐ 购买超级赞提升排名 >
```

#### 步骤2：查看弹窗
弹窗应该显示：
- 标题：⭐ 购买超级赞
- 当前超级赞数量：⭐ 12
- 快速选择按钮（5个选项）
- 自定义输入框
- 价格明细
- 提示信息
- 确认和取消按钮

#### 步骤3：选择购买数量

**方式1：快速选择**
- 点击任意快速选择按钮（如 ⭐x10 $20）
- 按钮会高亮显示
- 价格明细自动更新

**方式2：自定义输入**
- 在输入框中输入数字（如 15）
- 价格会实时计算（15 x $2 = $30）
- 快速选择按钮取消高亮

#### 步骤4：确认购买
- 点击"⭐ 立即购买 X 个超级赞"按钮
- 会弹出成功提示：
  ```
  成功购买 10 个超级赞！
  花费：$20
  您的回答排名将会提升！
  ```
- 点击"确定"

#### 步骤5：验证结果
- 弹窗自动关闭
- 回答卡片上的超级赞徽章数量更新（12 → 22）
- 可以再次点击购买按钮继续购买

## ✅ 测试检查清单

### 显示测试
- [ ] 第1条回答显示超级赞徽章（⭐ 超级赞 x5）
- [ ] 第2条回答显示超级赞徽章（⭐ 超级赞 x12）
- [ ] 第2条回答显示购买按钮
- [ ] 第1、3条回答不显示购买按钮
- [ ] 徽章颜色为金黄色
- [ ] 购买按钮颜色为金黄色

### 弹窗测试
- [ ] 点击购买按钮，弹窗正确打开
- [ ] 弹窗显示当前超级赞数量
- [ ] 5个快速选择按钮都显示正确
- [ ] 价格计算正确（5个$10, 10个$20, 等）
- [ ] 自定义输入框可以输入数字
- [ ] 价格明细正确显示

### 交互测试
- [ ] 点击快速选择按钮，按钮高亮
- [ ] 点击另一个快速选择按钮，前一个取消高亮
- [ ] 在自定义输入框输入数字，快速选择取消高亮
- [ ] 价格实时更新
- [ ] 总计金额正确计算

### 购买测试
- [ ] 未选择数量时，确认按钮禁用
- [ ] 选择数量后，确认按钮可点击
- [ ] 点击确认按钮，显示成功提示
- [ ] 提示信息包含购买数量和花费
- [ ] 弹窗自动关闭
- [ ] 超级赞数量正确更新

### 边界测试
- [ ] 输入0，提示"请输入有效的超级赞数量"
- [ ] 输入负数，提示"请输入有效的超级赞数量"
- [ ] 输入101，提示"单次最多购买 100 个超级赞"
- [ ] 点击取消按钮，弹窗关闭
- [ ] 关闭弹窗后，输入框清空

## 🎯 预期效果

### 购买前
```
⭐ 超级赞 x12
```

### 购买10个后
```
⭐ 超级赞 x22
```

### 再购买20个后
```
⭐ 超级赞 x42
```

## 🐛 常见问题

### Q1: 看不到购买按钮？
**A**: 检查回答数据中的 `isMyAnswer` 字段是否为 `true`。只有第2条回答设置了这个字段。

### Q2: 超级赞数量没有更新？
**A**: 检查是否成功购买。购买后应该看到成功提示，然后徽章数量会立即更新。

### Q3: 弹窗打不开？
**A**: 检查控制台是否有错误。确保所有状态变量都正确初始化。

### Q4: 价格计算不对？
**A**: 单价固定为 $2/个。检查输入的数量是否正确。

## 📸 截图位置

建议截图的关键界面：
1. 回答列表（显示超级赞徽章）
2. 购买按钮（金黄色按钮）
3. 购买弹窗（完整界面）
4. 快速选择（高亮状态）
5. 价格明细（总计显示）
6. 成功提示（购买完成）
7. 更新后的徽章（数量增加）

## 🎉 测试完成

如果所有检查项都通过，恭喜你！超级赞功能已经完美实现！

---

**下一步**: 可以考虑添加排序功能，让超级赞多的回答排在前面。
