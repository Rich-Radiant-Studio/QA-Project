# 追加悬赏功能实现完成（已优化）

## 功能概述
为悬赏问题添加了追加悬赏金额的功能，允许其他用户为感兴趣的问题增加悬赏金额，以吸引更多优质回答。

## 最新优化（v2.0）

### 1. 卡片位置优化
- ✅ 从标题下方移至更合理的位置
- ✅ 现在位于：问题内容 → 图片 → **悬赏卡片** → 标签
- ✅ 视觉流程更自然，不影响阅读体验

### 2. 卡片尺寸优化
- ✅ 缩小卡片尺寸，更加紧凑
- ✅ 减少内边距和字体大小
- ✅ 横向布局更紧凑：金额 | 人数 | 追加按钮
- ✅ 图标尺寸从 20px 降至 16px
- ✅ 金额字体从 24px 降至 16px
- ✅ 按钮文字从"追加悬赏"简化为"追加"

### 3. 新增功能：查看追加人员名单
**点击人数可查看详细名单**
- 显示所有追加悬赏的用户
- 排名显示（#1, #2, #3...）
- 用户头像、姓名、追加时间
- 追加金额徽章显示
- 顶部显示当前总悬赏和总人数

**名单弹窗特点**
- 底部滑出动画
- 最多显示 300px 高度，可滚动
- 每个用户一行，信息清晰
- 红色金额徽章突出显示
- 灰色排名徽章

## 功能特点

### 1. 悬赏信息卡片（优化版）
**紧凑设计**
- 浅红色背景 (#fef2f2)
- 细边框 (#fee2e2)
- 圆角 8px
- 内边距 10x8px

**信息展示**
- 💰 金额：$50（16px 粗体）
- 👥 人数：3 人追加（11px，可点击）
- ➕ 追加按钮（12px）

**交互**
- 点击人数 → 查看追加人员名单
- 点击追加按钮 → 打开追加悬赏弹窗

### 2. 追加悬赏弹窗（保持不变）
**当前悬赏信息**
- 显示当前总悬赏金额
- 显示已有多少人参与追加

**快速选择金额**
- 提供 6 个快速选项：$10, $20, $50, $100, $200, $500
- 点击选中，高亮显示
- 红色边框和背景标识选中状态

**自定义金额输入**
- 支持输入任意金额
- 最低限制：$5
- 最高限制：$1000（单次）
- 数字键盘输入

**智能提示**
- 蓝色提示框说明追加悬赏的作用
- 提醒用户追加的悬赏将与原悬赏合并

**操作按钮**
- 确认按钮：显示将要追加的金额
- 取消按钮：关闭弹窗

### 3. 追加人员名单弹窗（新增）
**顶部信息**
- 标题："追加悬赏名单"
- 关闭按钮

**总览卡片**
- 当前总悬赏：$50（24px 粗体）
- 共 3 人追加悬赏

**人员列表**
- 排名徽章：#1, #2, #3...
- 用户头像：40px 圆形
- 用户姓名：14px 粗体
- 追加时间：11px 灰色
- 追加金额：红色徽章显示

**底部按钮**
- 关闭按钮

### 4. 金额验证（保持不变）
- 最低金额：$5
- 最高金额：$1000
- 必须输入有效数字
- 自动更新问题的总悬赏金额

### 5. 实时更新（保持不变）
- 追加成功后立即更新悬赏金额
- 追加人数自动 +1
- 问题标题上的悬赏标签同步更新

## 使用场景
1. 用户看到一个很好的问题，但回答较少
2. 在问题内容下方看到悬赏信息卡片
3. 点击"3 人追加"查看已追加的用户名单
4. 点击"追加"按钮打开追加悬赏弹窗
5. 选择或输入追加金额
6. 确认追加
7. 悬赏金额增加，用户加入追加名单

## 视觉层次
```
问题标题（带悬赏标签 $50）
  ↓
作者信息 + 操作按钮
  ↓
问题内容
  ↓
问题图片
  ↓
【悬赏信息卡片】← 新位置
  ↓
浏览量 + 话题标签
  ↓
PK 进度条
  ↓
回答列表
```

## 技术实现
- 使用 React Native Modal 组件
- 状态管理：useState hooks
- 表单验证：金额范围检查
- UI 设计：Material Design 风格
- 响应式布局：适配不同屏幕尺寸
- ScrollView：支持长列表滚动

## 文件修改
- `qa-app/qa-native-app/src/screens/QuestionDetailScreen.js`
  - 添加追加悬赏状态管理
  - 添加悬赏信息卡片组件（优化版）
  - 添加追加悬赏弹窗组件
  - 添加追加人员名单弹窗组件（新增）
  - 添加相关样式定义
  - 调整卡片位置到问题图片之后

## 数据结构
```javascript
// 追加悬赏人员列表
const rewardContributorsList = [
  { 
    id: 1, 
    name: '张三丰', 
    avatar: 'https://...', 
    amount: 20, 
    time: '2小时前' 
  },
  // ...
];
```

## 后续优化建议
1. ✅ 缩小卡片尺寸
2. ✅ 添加追加人员名单查看功能
3. ✅ 优化卡片位置
4. 添加支付集成
5. 添加悬赏历史记录
6. 支持悬赏分配规则设置
7. 添加悬赏到期时间
8. 添加追加悬赏排行榜
9. 支持匿名追加悬赏
