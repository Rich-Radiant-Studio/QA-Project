# 团队操作按钮紧凑布局完成

## 更新时间
2026-01-27

## 功能概述

将所有操作按钮缩小并放置在团队标题的右侧，实现更紧凑的布局。

### 1. 普通成员操作按钮
三个小按钮横向排列在团队名称右侧：
- **活动**：发起活动
- **管理员**：申请管理员（已申请后显示"已申请"）
- **退出**：退出团队

### 2. 管理员操作按钮
一个小按钮在团队名称右侧：
- **解散**：解散团队

## 视觉效果

### 普通成员详情页
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Python学习互助团队    [活动][管理员][退出]
专注Python学习，互帮互助，共同进步
👥 12 成员  💬 45 问题
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
团队成员区域
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[团队讨论] [团队公告]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 管理员详情页
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Python学习互助团队              [解散]
专注Python学习，互帮互助，共同进步
👥 12 成员  💬 45 问题
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
团队成员区域
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[团队讨论] [团队公告] [审批消息 3]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 按钮样式

### 尺寸规格
- **内边距**：paddingHorizontal: 8px, paddingVertical: 4px
- **圆角**：borderRadius: 8px
- **字体大小**：11px
- **图标大小**：14px
- **按钮间距**：gap: 6px

### 颜色方案

#### 普通成员按钮
1. **活动按钮**
   - 背景：#eff6ff
   - 边框：#bfdbfe
   - 文字：#3b82f6
   - 图标：calendar

2. **管理员按钮**
   - 背景：#f5f3ff
   - 边框：#ddd6fe
   - 文字：#8b5cf6
   - 图标：shield-checkmark-outline
   - 已申请状态：
     - 背景：#f3f4f6
     - 边框：#e5e7eb
     - 文字：#9ca3af

3. **退出按钮**
   - 背景：#fef2f2
   - 边框：#fecaca
   - 文字：#ef4444
   - 图标：exit-outline

#### 管理员按钮
**解散按钮**
- 背景：#fef2f2
- 边框：#fecaca
- 文字：#ef4444
- 图标：trash-outline

## 布局结构

### 团队信息卡片布局
```jsx
<View style={styles.teamInfoCard}>
  <View style={styles.teamTitleRow}>
    <Text style={styles.teamName}>团队名称</Text>
    {/* 管理员：解散按钮 */}
    {team.isAdmin && <CompactDismissButton />}
    {/* 普通成员：三个操作按钮 */}
    {!team.isAdmin && (
      <View style={styles.compactActionsRow}>
        <CompactActionButton icon="calendar" text="活动" />
        <CompactActionButton icon="shield" text="管理员" />
        <CompactActionButton icon="exit" text="退出" />
      </View>
    )}
  </View>
  <Text style={styles.teamDesc}>团队描述</Text>
  <View style={styles.teamStats}>...</View>
</View>
```

## 交互逻辑

### 普通成员按钮

#### 1. 活动按钮
- 点击跳转到活动页面
- 传递团队ID和名称
- 进入创建活动模式

#### 2. 管理员按钮
- 点击弹出申请管理员弹窗
- 提交后文字变为"已申请"
- 按钮变灰色且禁用

#### 3. 退出按钮
- 点击弹出系统确认对话框
- 确认后退出团队并返回

### 管理员按钮

#### 解散按钮
- 点击弹出解散团队确认弹窗
- 需要输入团队名称确认
- 确认后解散团队并返回

## 响应式设计

### 标题文字处理
- 团队名称设置 `flex: 1` 和 `marginRight: 8`
- 长标题自动换行或截断
- 按钮始终保持在右侧

### 按钮自适应
- 按钮使用固定内边距
- 文字简短（2-3个字）
- 图标和文字紧凑排列

## 优势

### 1. 空间利用
- 节省垂直空间
- 操作按钮与标题在同一行
- 页面更加紧凑

### 2. 视觉层次
- 标题和操作按钮清晰分离
- 按钮颜色区分功能
- 图标增强识别性

### 3. 操作便捷
- 按钮位置固定
- 易于点击
- 功能一目了然

## 样式代码

```javascript
// 紧凑型操作按钮
compactActionsRow: { 
  flexDirection: 'row', 
  gap: 6 
},
compactActionBtn: { 
  flexDirection: 'row', 
  alignItems: 'center', 
  gap: 4, 
  paddingHorizontal: 8, 
  paddingVertical: 4, 
  borderRadius: 8, 
  backgroundColor: '#eff6ff', 
  borderWidth: 1, 
  borderColor: '#bfdbfe' 
},
compactActionBtnText: { 
  fontSize: 11, 
  color: '#3b82f6', 
  fontWeight: '600' 
},
```

## 测试路径

### 测试1：普通成员按钮显示
1. 问题详情页 → 团队 → 点击"代码审查小组"（成员角色）
2. 验证团队名称右侧显示三个小按钮
3. 验证按钮文字：活动、管理员、退出
4. 验证按钮颜色：蓝色、紫色、红色

### 测试2：管理员按钮显示
1. 首页 → 团队 → 点击"Python学习互助团"（管理员角色）
2. 验证团队名称右侧显示"解散"按钮
3. 验证按钮为红色
4. 点击验证弹出解散确认弹窗

### 测试3：按钮功能
1. 点击"活动"按钮，验证跳转到活动页面
2. 点击"管理员"按钮，验证弹出申请弹窗
3. 提交申请，验证按钮变为"已申请"且变灰
4. 点击"退出"按钮，验证弹出确认对话框
5. 点击"解散"按钮，验证弹出解散弹窗

### 测试4：长标题适配
1. 创建一个长名称的团队
2. 验证标题文字正确显示
3. 验证按钮不被遮挡
4. 验证布局不错乱

## 状态
✅ 所有功能已实现并测试通过
