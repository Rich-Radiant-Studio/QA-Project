import{f as y,p as O,c as u,o as i,a as s,b as a,w as t,r as m,F as U,d as $,h as g,g as V,e as f,t as p,n as S,j as N,E as B}from"./index-D2LDK2jx.js";import{_ as z}from"./StatCard-mgJZtsiF.js";const Q={class:"grid grid-cols-4 gap-4 mb-6"},W={class:"grid grid-cols-3 gap-6"},X={class:"bg-white rounded-xl shadow-sm"},Y={class:"px-4 py-3 border-b border-gray-100 flex items-center justify-between"},Z={class:"divide-y divide-gray-100"},ee=["onClick"],le={class:"flex items-center"},ae={class:"ml-3"},se={class:"font-medium text-sm"},te={class:"text-xs text-gray-400"},ne={class:"flex items-center gap-2"},oe={class:"col-span-2 bg-white rounded-xl shadow-sm"},ie={class:"px-4 py-3 border-b border-gray-100 flex items-center justify-between"},de={class:"font-bold"},re={key:0,class:"text-red-500 ml-2"},ue={key:0,class:"p-4"},me={class:"flex items-center mb-3"},ce={class:"font-medium"},fe={class:"grid grid-cols-4 gap-3 ml-6"},pe={key:1,class:"p-8 text-center text-gray-400"},ve={class:"mt-6 bg-white rounded-xl shadow-sm"},ke={class:"px-4 py-3 border-b border-gray-100 flex items-center justify-between"},ye={class:"flex items-center"},_e=["src"],be={class:"ml-3"},he={class:"font-medium"},ge={class:"text-xs text-gray-400"},Ve={__name:"Permissions",setup(xe){const c=y(null),x=y(!1),w=y(!1),k=y({name:"",desc:"",icon:"fas fa-user"}),d=y({name:"",email:"",phone:"",roleId:"",password:""}),R=y([{id:1,name:"超级管理员",icon:"fas fa-crown",iconBg:"bg-red-100",iconColor:"text-red-500",userCount:2,isSystem:!0},{id:2,name:"内容审核员",icon:"fas fa-check-circle",iconBg:"bg-blue-100",iconColor:"text-blue-500",userCount:5,isSystem:!1},{id:3,name:"财务管理员",icon:"fas fa-dollar-sign",iconBg:"bg-green-100",iconColor:"text-green-500",userCount:2,isSystem:!1},{id:4,name:"运营管理员",icon:"fas fa-chart-line",iconBg:"bg-purple-100",iconColor:"text-purple-500",userCount:3,isSystem:!1},{id:5,name:"客服专员",icon:"fas fa-headset",iconBg:"bg-orange-100",iconColor:"text-orange-500",userCount:4,isSystem:!1}]),E=O([{name:"用户管理",checked:!1,indeterminate:!1,permissions:[{key:"user_view",name:"查看用户",checked:!1},{key:"user_edit",name:"编辑用户",checked:!1},{key:"user_ban",name:"封禁用户",checked:!1},{key:"user_delete",name:"删除用户",checked:!1}]},{name:"问题管理",checked:!1,indeterminate:!1,permissions:[{key:"question_view",name:"查看问题",checked:!1},{key:"question_audit",name:"审核问题",checked:!1},{key:"question_edit",name:"编辑问题",checked:!1},{key:"question_delete",name:"删除问题",checked:!1}]},{name:"回答管理",checked:!1,indeterminate:!1,permissions:[{key:"answer_view",name:"查看回答",checked:!1},{key:"answer_audit",name:"审核回答",checked:!1},{key:"answer_edit",name:"编辑回答",checked:!1},{key:"answer_delete",name:"删除回答",checked:!1}]},{name:"活动管理",checked:!1,indeterminate:!1,permissions:[{key:"activity_view",name:"查看活动",checked:!1},{key:"activity_create",name:"创建活动",checked:!1},{key:"activity_audit",name:"审核活动",checked:!1},{key:"activity_delete",name:"删除活动",checked:!1}]},{name:"财务管理",checked:!1,indeterminate:!1,permissions:[{key:"finance_view",name:"查看财务",checked:!1},{key:"finance_withdraw",name:"处理提现",checked:!1},{key:"finance_refund",name:"处理退款",checked:!1},{key:"finance_export",name:"导出报表",checked:!1}]},{name:"系统设置",checked:!1,indeterminate:!1,permissions:[{key:"setting_view",name:"查看设置",checked:!1},{key:"setting_edit",name:"修改设置",checked:!1},{key:"permission_manage",name:"权限管理",checked:!1},{key:"log_view",name:"查看日志",checked:!1}]}]),G=y([{id:1,name:"超级管理员",email:"admin@example.com",phone:"138****8888",role:"超级管理员",roleClass:"bg-red-100 text-red-600",lastLogin:"2026-01-16 10:30",status:"active",isSuper:!0,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin"},{id:2,name:"张审核",email:"reviewer@example.com",phone:"139****6666",role:"内容审核员",roleClass:"bg-blue-100 text-blue-600",lastLogin:"2026-01-16 09:15",status:"active",isSuper:!1,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin2"},{id:3,name:"李财务",email:"finance@example.com",phone:"137****5555",role:"财务管理员",roleClass:"bg-green-100 text-green-600",lastLogin:"2026-01-15 18:45",status:"active",isSuper:!1,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin3"},{id:4,name:"王运营",email:"operator@example.com",phone:"136****4444",role:"运营管理员",roleClass:"bg-purple-100 text-purple-600",lastLogin:"2026-01-14 14:20",status:"disabled",isSuper:!1,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=admin4"}]),I=o=>{c.value=o,o.isSystem?E.forEach(e=>{e.permissions.forEach(n=>n.checked=!0),e.checked=!0,e.indeterminate=!1}):E.forEach(e=>{e.permissions.forEach(n=>n.checked=Math.random()>.5),j(e)})},F=o=>{o.permissions.forEach(e=>e.checked=o.checked),o.indeterminate=!1},j=o=>{const e=o.permissions.filter(n=>n.checked).length;o.checked=e===o.permissions.length,o.indeterminate=e>0&&e<o.permissions.length},P=()=>{B.success("权限保存成功")},D=()=>{x.value=!1,B.success("角色添加成功")},T=o=>{B.info("编辑角色: "+o.name)},H=o=>{B.warning("删除角色: "+o.name)},J=()=>{w.value=!1,B.success("管理员添加成功")};return(o,e)=>{const n=m("el-button"),L=m("el-checkbox"),_=m("el-table-column"),K=m("el-table"),b=m("el-input"),v=m("el-form-item"),h=m("el-option"),A=m("el-select"),M=m("el-form"),q=m("el-dialog");return i(),u("div",null,[s("div",Q,[a(z,{title:"角色总数",value:"8",icon:"fas fa-user-shield",iconBg:"bg-blue-100",iconColor:"text-blue-500"}),a(z,{title:"管理员",value:"12",valueClass:"text-red-500",icon:"fas fa-user-cog",iconBg:"bg-red-100",iconColor:"text-red-500"}),a(z,{title:"权限项",value:"56",valueClass:"text-purple-500",icon:"fas fa-key",iconBg:"bg-purple-100",iconColor:"text-purple-500"}),a(z,{title:"操作日志",value:"12,580",valueClass:"text-green-500",icon:"fas fa-history",iconBg:"bg-green-100",iconColor:"text-green-500"})]),s("div",W,[s("div",X,[s("div",Y,[e[15]||(e[15]=s("span",{class:"font-bold"},"角色管理",-1)),a(n,{type:"primary",size:"small",onClick:e[0]||(e[0]=l=>x.value=!0)},{default:t(()=>[...e[14]||(e[14]=[s("i",{class:"fas fa-plus mr-1"},null,-1),f("添加角色 ",-1)])]),_:1})]),s("div",Z,[(i(!0),u(U,null,$(R.value,l=>{var r;return i(),u("div",{key:l.id,class:S(["px-4 py-3 flex items-center justify-between cursor-pointer hover:bg-gray-50",((r=c.value)==null?void 0:r.id)===l.id&&"bg-red-50"]),onClick:C=>I(l)},[s("div",le,[s("div",{class:S(["w-10 h-10 rounded-lg flex items-center justify-center",l.iconBg])},[s("i",{class:S([l.icon,l.iconColor])},null,2)],2),s("div",ae,[s("div",se,p(l.name),1),s("div",te,p(l.userCount)+" 人",1)])]),s("div",ne,[l.isSystem?V("",!0):(i(),g(n,{key:0,link:"",type:"primary",size:"small",onClick:N(C=>T(l),["stop"])},{default:t(()=>[...e[16]||(e[16]=[s("i",{class:"fas fa-edit"},null,-1)])]),_:1},8,["onClick"])),l.isSystem?V("",!0):(i(),g(n,{key:1,link:"",type:"danger",size:"small",onClick:N(C=>H(l),["stop"])},{default:t(()=>[...e[17]||(e[17]=[s("i",{class:"fas fa-trash"},null,-1)])]),_:1},8,["onClick"]))])],10,ee)}),128))])]),s("div",oe,[s("div",ie,[s("span",de,[e[18]||(e[18]=f(" 权限配置 ",-1)),c.value?(i(),u("span",re,"- "+p(c.value.name),1)):V("",!0)]),c.value&&!c.value.isSystem?(i(),g(n,{key:0,type:"primary",size:"small",onClick:P},{default:t(()=>[...e[19]||(e[19]=[s("i",{class:"fas fa-save mr-1"},null,-1),f("保存 ",-1)])]),_:1})):V("",!0)]),c.value?(i(),u("div",ue,[(i(!0),u(U,null,$(E,l=>(i(),u("div",{key:l.name,class:"mb-6"},[s("div",me,[a(L,{modelValue:l.checked,"onUpdate:modelValue":r=>l.checked=r,indeterminate:l.indeterminate,onChange:r=>F(l),disabled:c.value.isSystem},{default:t(()=>[s("span",ce,p(l.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onChange","disabled"])]),s("div",fe,[(i(!0),u(U,null,$(l.permissions,r=>(i(),g(L,{key:r.key,modelValue:r.checked,"onUpdate:modelValue":C=>r.checked=C,onChange:C=>j(l),disabled:c.value.isSystem},{default:t(()=>[f(p(r.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange","disabled"]))),128))])]))),128))])):(i(),u("div",pe,[...e[20]||(e[20]=[s("i",{class:"fas fa-hand-point-left text-4xl mb-4"},null,-1),s("div",null,"请选择一个角色查看权限配置",-1)])]))])]),s("div",ve,[s("div",ke,[e[22]||(e[22]=s("span",{class:"font-bold"},"管理员列表",-1)),a(n,{type:"primary",size:"small",onClick:e[1]||(e[1]=l=>w.value=!0)},{default:t(()=>[...e[21]||(e[21]=[s("i",{class:"fas fa-plus mr-1"},null,-1),f("添加管理员 ",-1)])]),_:1})]),a(K,{data:G.value,style:{width:"100%"}},{default:t(()=>[a(_,{label:"管理员","min-width":"200"},{default:t(({row:l})=>[s("div",ye,[s("img",{src:l.avatar,class:"w-10 h-10 rounded-full"},null,8,_e),s("div",be,[s("div",he,p(l.name),1),s("div",ge,p(l.email),1)])])]),_:1}),a(_,{label:"角色",width:"120"},{default:t(({row:l})=>[s("span",{class:S(["px-2 py-1 text-xs rounded",l.roleClass])},p(l.role),3)]),_:1}),a(_,{prop:"phone",label:"手机号",width:"140"}),a(_,{prop:"lastLogin",label:"最后登录",width:"160"}),a(_,{label:"状态",width:"100"},{default:t(({row:l})=>[s("span",{class:S(["status-badge",l.status==="active"?"status-approved":"status-banned"])},p(l.status==="active"?"正常":"禁用"),3)]),_:1}),a(_,{label:"操作",width:"150"},{default:t(({row:l})=>[a(n,{link:"",type:"primary",size:"small"},{default:t(()=>[...e[23]||(e[23]=[s("i",{class:"fas fa-edit"},null,-1)])]),_:1}),a(n,{link:"",type:"warning",size:"small"},{default:t(()=>[...e[24]||(e[24]=[s("i",{class:"fas fa-key"},null,-1)])]),_:1}),l.isSuper?V("",!0):(i(),g(n,{key:0,link:"",type:"danger",size:"small"},{default:t(()=>[...e[25]||(e[25]=[s("i",{class:"fas fa-trash"},null,-1)])]),_:1}))]),_:1})]),_:1},8,["data"])]),a(q,{modelValue:x.value,"onUpdate:modelValue":e[6]||(e[6]=l=>x.value=l),title:"添加角色",width:"400px"},{footer:t(()=>[a(n,{onClick:e[5]||(e[5]=l=>x.value=!1)},{default:t(()=>[...e[26]||(e[26]=[f("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:D},{default:t(()=>[...e[27]||(e[27]=[f("添加",-1)])]),_:1})]),default:t(()=>[a(M,{model:k.value,"label-width":"80px"},{default:t(()=>[a(v,{label:"角色名称"},{default:t(()=>[a(b,{modelValue:k.value.name,"onUpdate:modelValue":e[2]||(e[2]=l=>k.value.name=l),placeholder:"请输入角色名称"},null,8,["modelValue"])]),_:1}),a(v,{label:"角色描述"},{default:t(()=>[a(b,{modelValue:k.value.desc,"onUpdate:modelValue":e[3]||(e[3]=l=>k.value.desc=l),type:"textarea",rows:2,placeholder:"请输入角色描述"},null,8,["modelValue"])]),_:1}),a(v,{label:"角色图标"},{default:t(()=>[a(A,{modelValue:k.value.icon,"onUpdate:modelValue":e[4]||(e[4]=l=>k.value.icon=l),placeholder:"选择图标"},{default:t(()=>[a(h,{label:"用户",value:"fas fa-user"}),a(h,{label:"审核",value:"fas fa-check-circle"}),a(h,{label:"财务",value:"fas fa-dollar-sign"}),a(h,{label:"运营",value:"fas fa-chart-line"}),a(h,{label:"客服",value:"fas fa-headset"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),a(q,{modelValue:w.value,"onUpdate:modelValue":e[13]||(e[13]=l=>w.value=l),title:"添加管理员",width:"450px"},{footer:t(()=>[a(n,{onClick:e[12]||(e[12]=l=>w.value=!1)},{default:t(()=>[...e[28]||(e[28]=[f("取消",-1)])]),_:1}),a(n,{type:"primary",onClick:J},{default:t(()=>[...e[29]||(e[29]=[f("添加",-1)])]),_:1})]),default:t(()=>[a(M,{model:d.value,"label-width":"80px"},{default:t(()=>[a(v,{label:"姓名"},{default:t(()=>[a(b,{modelValue:d.value.name,"onUpdate:modelValue":e[7]||(e[7]=l=>d.value.name=l),placeholder:"请输入姓名"},null,8,["modelValue"])]),_:1}),a(v,{label:"邮箱"},{default:t(()=>[a(b,{modelValue:d.value.email,"onUpdate:modelValue":e[8]||(e[8]=l=>d.value.email=l),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),a(v,{label:"手机号"},{default:t(()=>[a(b,{modelValue:d.value.phone,"onUpdate:modelValue":e[9]||(e[9]=l=>d.value.phone=l),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),a(v,{label:"角色"},{default:t(()=>[a(A,{modelValue:d.value.roleId,"onUpdate:modelValue":e[10]||(e[10]=l=>d.value.roleId=l),placeholder:"选择角色",style:{width:"100%"}},{default:t(()=>[(i(!0),u(U,null,$(R.value,l=>(i(),g(h,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(v,{label:"初始密码"},{default:t(()=>[a(b,{modelValue:d.value.password,"onUpdate:modelValue":e[11]||(e[11]=l=>d.value.password=l),type:"password",placeholder:"请输入初始密码"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};export{Ve as default};
