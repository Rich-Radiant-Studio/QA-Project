<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æµ‹è¯•ä¸­å›½åœ°åŒºä¸­æ–‡åŒ–</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
      background: #f5f5f5;
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #409eff;
      padding-bottom: 10px;
    }
    .stats {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .stats h2 {
      margin-top: 0;
      color: #409eff;
    }
    .province-section {
      background: white;
      padding: 15px;
      margin: 15px 0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .province-title {
      font-size: 18px;
      font-weight: bold;
      color: #409eff;
      margin-bottom: 10px;
      padding-bottom: 8px;
      border-bottom: 2px solid #e4e7ed;
    }
    .cities {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 10px;
      margin-top: 10px;
    }
    .city {
      padding: 8px 12px;
      background: #f0f9ff;
      border-radius: 4px;
      font-size: 14px;
      border-left: 3px solid #409eff;
    }
    .city.english {
      background: #fee;
      border-left-color: #f56c6c;
      color: #f56c6c;
    }
    .warning {
      background: #fff3cd;
      border: 1px solid #ffc107;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
    }
    .success {
      background: #d4edda;
      border: 1px solid #28a745;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
    }
  </style>
</head>
<body>
  <h1>ğŸ‡¨ğŸ‡³ ä¸­å›½åœ°åŒºä¸­æ–‡åŒ–æµ‹è¯•</h1>
  
  <div class="stats">
    <h2>ğŸ“Š ç»Ÿè®¡ä¿¡æ¯</h2>
    <div id="stats"></div>
  </div>

  <div id="warning"></div>
  
  <div id="provinces"></div>

  <script type="module">
    import { regionData } from './src/data/regions-full-cn.js'

    // æŸ¥æ‰¾ä¸­å›½æ•°æ®
    const chinaData = regionData.find(country => country.value === 'CN')
    
    if (!chinaData) {
      document.getElementById('warning').innerHTML = '<div class="warning">âš ï¸ æœªæ‰¾åˆ°ä¸­å›½æ•°æ®ï¼</div>'
    } else {
      let totalProvinces = 0
      let totalCities = 0
      let englishCities = []
      
      // ç»Ÿè®¡ä¿¡æ¯
      chinaData.children.forEach(province => {
        totalProvinces++
        if (province.children) {
          province.children.forEach(city => {
            totalCities++
            // æ£€æŸ¥æ˜¯å¦åŒ…å«è‹±æ–‡ï¼ˆç®€å•åˆ¤æ–­ï¼šæ˜¯å¦åŒ…å«æ‹‰ä¸å­—æ¯ï¼‰
            if (/[a-zA-Z]/.test(city.label)) {
              englishCities.push({
                province: province.label,
                city: city.label
              })
            }
          })
        }
      })

      // æ˜¾ç¤ºç»Ÿè®¡
      const statsHtml = `
        <p><strong>çœä»½/ç›´è¾–å¸‚/è‡ªæ²»åŒºæ•°é‡ï¼š</strong> ${totalProvinces}</p>
        <p><strong>åŸå¸‚/åœ°åŒºæ€»æ•°ï¼š</strong> ${totalCities}</p>
        <p><strong>æœªä¸­æ–‡åŒ–çš„åŸå¸‚ï¼š</strong> ${englishCities.length}</p>
      `
      document.getElementById('stats').innerHTML = statsHtml

      // æ˜¾ç¤ºè­¦å‘Šæˆ–æˆåŠŸä¿¡æ¯
      if (englishCities.length > 0) {
        const warningHtml = `
          <div class="warning">
            <h3>âš ï¸ å‘ç° ${englishCities.length} ä¸ªæœªå®Œå…¨ä¸­æ–‡åŒ–çš„åŸå¸‚</h3>
            <p>ä»¥ä¸‹åŸå¸‚ä»æ˜¾ç¤ºä¸ºè‹±æ–‡ï¼Œéœ€è¦æ·»åŠ åˆ°æ˜ å°„è¡¨ä¸­ï¼š</p>
            <ul>
              ${englishCities.slice(0, 20).map(item => 
                `<li><strong>${item.province}</strong> - ${item.city}</li>`
              ).join('')}
              ${englishCities.length > 20 ? `<li>...è¿˜æœ‰ ${englishCities.length - 20} ä¸ª</li>` : ''}
            </ul>
          </div>
        `
        document.getElementById('warning').innerHTML = warningHtml
      } else {
        document.getElementById('warning').innerHTML = `
          <div class="success">
            <h3>âœ… æ‰€æœ‰ä¸­å›½åŸå¸‚å·²å®Œå…¨ä¸­æ–‡åŒ–ï¼</h3>
            <p>å…± ${totalProvinces} ä¸ªçœçº§è¡Œæ”¿åŒºï¼Œ${totalCities} ä¸ªåŸå¸‚/åœ°åŒºï¼Œå…¨éƒ¨æ˜¾ç¤ºä¸ºä¸­æ–‡ã€‚</p>
          </div>
        `
      }

      // æ˜¾ç¤ºæ‰€æœ‰çœä»½å’ŒåŸå¸‚
      const provincesHtml = chinaData.children.map(province => {
        const citiesHtml = province.children
          ? province.children.map(city => {
              const hasEnglish = /[a-zA-Z]/.test(city.label)
              return `<div class="city ${hasEnglish ? 'english' : ''}">${city.label}</div>`
            }).join('')
          : '<div class="city">æ— ä¸‹çº§åŸå¸‚</div>'
        
        return `
          <div class="province-section">
            <div class="province-title">${province.label} (${province.children ? province.children.length : 0} ä¸ªåŸå¸‚)</div>
            <div class="cities">${citiesHtml}</div>
          </div>
        `
      }).join('')

      document.getElementById('provinces').innerHTML = provincesHtml
    }
  </script>
</body>
</html>
