# é”™è¯¯å¤„ç†ä¼˜åŒ–è¯´æ˜

## ğŸ¯ é—®é¢˜æè¿°

**ç”¨æˆ·åé¦ˆ**ï¼š
> "ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥: [Error: ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨]
> ä¸è¦å°†åç«¯çš„è¿”å›å€¼ç›´æ¥æ‰“å°æ˜¾ç¤ºåœ¨è®¾å¤‡ä¸Šï¼Œä½ å¯ä»¥ç›´æ¥å…³é—­å¼¹çª—ï¼Œå› ä¸º Toast æç¤ºæ¡†ä¼šå‡ºç°åœ¨è®¾å¤‡é¡¶éƒ¨"

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜ 1ï¼šåç«¯é”™è¯¯ä¿¡æ¯ç›´æ¥æ˜¾ç¤ºåœ¨æ§åˆ¶å°

```javascript
// âŒ é”™è¯¯åšæ³•
console.error('æ›´æ–°ç”¨æˆ·åå¤±è´¥:', error);
// è¾“å‡º: ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥: [Error: ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨]
```

**å½±å“**ï¼š
- åç«¯çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå¦‚ `[Error: ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨]`ï¼‰ç›´æ¥æ˜¾ç¤ºåœ¨æ§åˆ¶å°
- åœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéƒ½ä¼šæ˜¾ç¤º
- å¯èƒ½æš´éœ²æ•æ„Ÿä¿¡æ¯æˆ–åç«¯å®ç°ç»†èŠ‚

### é—®é¢˜ 2ï¼šé”™è¯¯æ—¶å¼¹çª—æœªå…³é—­

```javascript
// âŒ é”™è¯¯åšæ³•
try {
  await updateUsername(newUsername);
  setShowUsernameModal(false);  // åªåœ¨æˆåŠŸæ—¶å…³é—­
  showToast('ç”¨æˆ·åå·²æ›´æ–°', 'success');
} catch (error) {
  showToast(error.message, 'error');
  // å¼¹çª—ä»ç„¶æ‰“å¼€ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨å…³é—­
}
```

**å½±å“**ï¼š
- é”™è¯¯æ—¶å¼¹çª—ä»ç„¶æ˜¾ç¤º
- Toast æç¤ºåœ¨é¡¶éƒ¨ï¼Œå¼¹çª—åœ¨ä¸­é—´
- ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å…³é—­å¼¹çª—ï¼Œä½“éªŒä¸å¥½

## âœ… å·²å®æ–½çš„ä¿®å¤

### ä¿®å¤ 1ï¼šç§»é™¤åç«¯é”™è¯¯è¯¦æƒ…

**ä¿®æ”¹å‰**ï¼š
```javascript
console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥:', error);
// è¾“å‡º: ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥: [Error: ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨]
```

**ä¿®æ”¹å**ï¼š
```javascript
console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥');
// è¾“å‡º: ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥
```

**æ•ˆæœ**ï¼š
- âœ… åªè®°å½•é”™è¯¯ç±»å‹ï¼Œä¸æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- âœ… é¿å…æš´éœ²åç«¯é”™è¯¯ç»†èŠ‚
- âœ… æ§åˆ¶å°è¾“å‡ºæ›´ç®€æ´

### ä¿®å¤ 2ï¼šé”™è¯¯æ—¶è‡ªåŠ¨å…³é—­å¼¹çª—

**ä¿®æ”¹å‰**ï¼š
```javascript
try {
  const updatedProfile = await UserCacheService.updateUsername(newUsername);
  
  if (updatedProfile) {
    // æ›´æ–°çŠ¶æ€...
    setShowUsernameModal(false);  // åªåœ¨æˆåŠŸæ—¶å…³é—­
    showToast('ç”¨æˆ·åå·²æ›´æ–°', 'success');
  }
} catch (error) {
  console.error('æ›´æ–°ç”¨æˆ·åå¤±è´¥:', error);
  showToast(error.message || 'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•', 'error');
  // âŒ å¼¹çª—ä»ç„¶æ‰“å¼€
}
```

**ä¿®æ”¹å**ï¼š
```javascript
try {
  const updatedProfile = await UserCacheService.updateUsername(newUsername);
  
  if (updatedProfile) {
    // æ›´æ–°çŠ¶æ€...
    setShowUsernameModal(false);  // æˆåŠŸæ—¶å…³é—­
    showToast('ç”¨æˆ·åå·²æ›´æ–°', 'success');
  }
} catch (error) {
  console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥');  // ä¸æ˜¾ç¤ºè¯¦ç»†é”™è¯¯
  
  setShowUsernameModal(false);  // âœ… å¤±è´¥æ—¶ä¹Ÿå…³é—­
  
  showToast(error.message || 'æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
}
```

**æ•ˆæœ**ï¼š
- âœ… æˆåŠŸæ—¶å…³é—­å¼¹çª—ï¼Œæ˜¾ç¤ºæˆåŠŸ Toast
- âœ… å¤±è´¥æ—¶ä¹Ÿå…³é—­å¼¹çª—ï¼Œæ˜¾ç¤ºé”™è¯¯ Toast
- âœ… ç”¨æˆ·æ— éœ€æ‰‹åŠ¨å…³é—­å¼¹çª—
- âœ… Toast åœ¨é¡¶éƒ¨æ¸…æ™°å¯è§

## ğŸ“Š ä¿®æ”¹çš„æ–‡ä»¶

### 1. `src/services/UserCacheService.js`

**ä¿®æ”¹å†…å®¹**ï¼š
- `updateUserProfile()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `updateUsername()` - ç§»é™¤é”™è¯¯è¯¦æƒ…

**ä¿®æ”¹ç¤ºä¾‹**ï¼š
```javascript
// ä¿®æ”¹å‰
console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥:', error);

// ä¿®æ”¹å
console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥');
```

### 2. `src/screens/SettingsScreen.js`

**ä¿®æ”¹å†…å®¹**ï¼š
- `handleSaveUsername()` - å¤±è´¥æ—¶å…³é—­å¼¹çª— + ç§»é™¤é”™è¯¯è¯¦æƒ…
- `handleSaveText()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `uploadImageToServer()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `requestCameraPermission()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `requestMediaLibraryPermission()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `handleTakePhoto()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `handleChooseFromAlbum()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `validateImage()` - ç§»é™¤é”™è¯¯è¯¦æƒ…
- `handleBindSuccess()` - ç§»é™¤é”™è¯¯è¯¦æƒ…

**å…³é”®ä¿®æ”¹**ï¼š
```javascript
// handleSaveUsername() ä¸­çš„ä¿®æ”¹
catch (error) {
  console.error('âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥');  // ä¸æ˜¾ç¤ºè¯¦ç»†é”™è¯¯
  
  setShowUsernameModal(false);  // âœ… å¤±è´¥æ—¶ä¹Ÿå…³é—­å¼¹çª—
  
  showToast(error.message || 'æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
}
```

### 3. `src/screens/LoginScreen.js`

**ä¿®æ”¹å†…å®¹**ï¼š
- `handleLogin()` - ç§»é™¤é”™è¯¯è¯¦æƒ…

## ğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹è¿›

### åœºæ™¯ 1ï¼šç”¨æˆ·åå·²è¢«å ç”¨

**ä¿®æ”¹å‰**ï¼š
1. ç”¨æˆ·è¾“å…¥ "Nicole"
2. ç‚¹å‡»ä¿å­˜
3. æ§åˆ¶å°æ˜¾ç¤ºï¼š`ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥: [Error: ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨]`
4. Toast æ˜¾ç¤ºï¼š`ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨`
5. å¼¹çª—ä»ç„¶æ‰“å¼€ï¼Œç”¨æˆ·éœ€è¦æ‰‹åŠ¨å…³é—­

**ä¿®æ”¹å**ï¼š
1. ç”¨æˆ·è¾“å…¥ "Nicole"
2. ç‚¹å‡»ä¿å­˜
3. æ§åˆ¶å°æ˜¾ç¤ºï¼š`ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥`
4. Toast æ˜¾ç¤ºï¼š`ç”¨æˆ·å'Nicole'å·²è¢«å ç”¨`
5. âœ… å¼¹çª—è‡ªåŠ¨å…³é—­

### åœºæ™¯ 2ï¼šç½‘ç»œé”™è¯¯

**ä¿®æ”¹å‰**ï¼š
1. ç”¨æˆ·è¾“å…¥æ–°ç”¨æˆ·å
2. ç‚¹å‡»ä¿å­˜
3. æ§åˆ¶å°æ˜¾ç¤ºï¼š`ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥: [Error: Network Error]`
4. Toast æ˜¾ç¤ºï¼š`ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥åé‡è¯•`
5. å¼¹çª—ä»ç„¶æ‰“å¼€

**ä¿®æ”¹å**ï¼š
1. ç”¨æˆ·è¾“å…¥æ–°ç”¨æˆ·å
2. ç‚¹å‡»ä¿å­˜
3. æ§åˆ¶å°æ˜¾ç¤ºï¼š`ERROR âŒ æ›´æ–°ç”¨æˆ·åå¤±è´¥`
4. Toast æ˜¾ç¤ºï¼š`æ›´æ–°å¤±è´¥ï¼Œè¯·é‡è¯•`
5. âœ… å¼¹çª—è‡ªåŠ¨å…³é—­

## ğŸ“ é”™è¯¯å¤„ç†æœ€ä½³å®è·µ

### 1. æ§åˆ¶å°æ—¥å¿—

```javascript
// âœ… æ¨èï¼šåªè®°å½•é”™è¯¯ç±»å‹
console.error('âŒ æ“ä½œå¤±è´¥');

// âŒ é¿å…ï¼šæ˜¾ç¤ºè¯¦ç»†é”™è¯¯å¯¹è±¡
console.error('âŒ æ“ä½œå¤±è´¥:', error);
console.error('âŒ æ“ä½œå¤±è´¥:', error.message);
console.error('âŒ æ“ä½œå¤±è´¥:', JSON.stringify(error));
```

### 2. ç”¨æˆ·æç¤º

```javascript
// âœ… æ¨èï¼šå‹å¥½çš„é”™è¯¯æç¤º
showToast(error.message || 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');

// âŒ é¿å…ï¼šç›´æ¥æ˜¾ç¤ºåç«¯é”™è¯¯
showToast(error.toString(), 'error');
showToast(`é”™è¯¯: ${error}`, 'error');
```

### 3. å¼¹çª—å…³é—­

```javascript
// âœ… æ¨èï¼šæˆåŠŸå’Œå¤±è´¥éƒ½å…³é—­å¼¹çª—
try {
  await someOperation();
  setShowModal(false);  // æˆåŠŸæ—¶å…³é—­
  showToast('æ“ä½œæˆåŠŸ', 'success');
} catch (error) {
  console.error('âŒ æ“ä½œå¤±è´¥');
  setShowModal(false);  // å¤±è´¥æ—¶ä¹Ÿå…³é—­
  showToast(error.message || 'æ“ä½œå¤±è´¥', 'error');
}

// âŒ é¿å…ï¼šåªåœ¨æˆåŠŸæ—¶å…³é—­
try {
  await someOperation();
  setShowModal(false);
  showToast('æ“ä½œæˆåŠŸ', 'success');
} catch (error) {
  showToast(error.message, 'error');
  // å¼¹çª—ä»ç„¶æ‰“å¼€
}
```

### 4. é”™è¯¯æ¶ˆæ¯å¤„ç†

```javascript
// âœ… æ¨èï¼šæä¾›é»˜è®¤å‹å¥½æ¶ˆæ¯
const errorMessage = error.message || 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•';
showToast(errorMessage, 'error');

// âœ… æ¨èï¼šæ ¹æ®é”™è¯¯ç±»å‹æä¾›ä¸åŒæ¶ˆæ¯
let errorMessage = 'æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•';
if (error.message?.includes('ç½‘ç»œ')) {
  errorMessage = 'ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ';
} else if (error.message?.includes('è¶…æ—¶')) {
  errorMessage = 'è¯·æ±‚è¶…æ—¶ï¼Œè¯·é‡è¯•';
}
showToast(errorMessage, 'error');
```

## ğŸ” è°ƒè¯•å»ºè®®

### å¼€å‘ç¯å¢ƒ

å¦‚æœéœ€è¦æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯è¿›è¡Œè°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨ï¼š

```javascript
if (__DEV__) {
  console.error('âŒ è¯¦ç»†é”™è¯¯:', error);
  console.error('é”™è¯¯å †æ ˆ:', error.stack);
}
```

### ç”Ÿäº§ç¯å¢ƒ

ç”Ÿäº§ç¯å¢ƒåªè®°å½•é”™è¯¯ç±»å‹ï¼š

```javascript
console.error('âŒ æ“ä½œå¤±è´¥');
```

å¦‚æœéœ€è¦è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨é”™è¯¯ç›‘æ§æœåŠ¡ï¼ˆå¦‚ Sentryï¼‰ï¼š

```javascript
try {
  await someOperation();
} catch (error) {
  console.error('âŒ æ“ä½œå¤±è´¥');
  
  // å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
  if (!__DEV__) {
    Sentry.captureException(error);
  }
  
  showToast('æ“ä½œå¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
}
```

## ğŸ‰ ä¼˜åŠ¿

1. **ç”¨æˆ·ä½“éªŒæ›´å¥½**
   - é”™è¯¯æ—¶å¼¹çª—è‡ªåŠ¨å…³é—­
   - Toast æç¤ºæ¸…æ™°å¯è§
   - æ— éœ€æ‰‹åŠ¨å…³é—­å¼¹çª—

2. **æ§åˆ¶å°æ›´ç®€æ´**
   - åªæ˜¾ç¤ºé”™è¯¯ç±»å‹
   - ä¸æš´éœ²åç«¯ç»†èŠ‚
   - ä¾¿äºå¿«é€Ÿå®šä½é—®é¢˜

3. **å®‰å…¨æ€§æ›´é«˜**
   - ä¸æš´éœ²æ•æ„Ÿä¿¡æ¯
   - ä¸æš´éœ²åç«¯å®ç°ç»†èŠ‚
   - ç¬¦åˆå®‰å…¨æœ€ä½³å®è·µ

4. **ä»£ç æ›´ç»Ÿä¸€**
   - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æ–¹å¼
   - ç»Ÿä¸€çš„ç”¨æˆ·æç¤º
   - æ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ“š ç›¸å…³æ–‡æ¡£

- `API_USAGE_GUIDE.md` - API ä½¿ç”¨æŒ‡å—
- `USER_LOGIN_FLOW.md` - ç”¨æˆ·ç™»å½•æµç¨‹
- `AVATAR_UPLOAD_VALIDATION.md` - å¤´åƒä¸Šä¼ éªŒè¯
